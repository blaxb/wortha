{% extends "base.html" %}

{% block content %}
<section class="dashboard-hero">
  <div class="dashboard-hero-inner">
    <p class="eyebrow">Creator pricing workspace</p>
    <h1>Welcome back, {{ user.username or user.email }}</h1>
    <p class="hero-subtitle">
      What do you want to do today? Current plan:
      <span class="plan-pill">{{ user.plan|capitalize }}</span>
    </p>
  </div>
</section>

<div class="grid grid-3">
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">ğŸ“Š</div>
      <div>
        <h3>Pricing Calculator</h3>
        <p class="tile-subtitle">Get a fair sponsorship range in seconds.</p>
      </div>
    </div>
    <a class="btn btn-secondary" href="/calculator">Open</a>
  </section>
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">ğŸ“„</div>
      <div>
        <h3>Media Kit Generator</h3>
        <p class="tile-subtitle">Generate a professional PDF for brands.</p>
      </div>
    </div>
    {% if user.plan and user.plan|lower in ["pro", "premium"] %}
      <a class="btn btn-secondary" href="/media-kit">Open</a>
    {% else %}
      <span class="badge">Pro</span>
      <a class="btn btn-secondary" href="/upgrade?reason=media-kit">Unlock with Pro</a>
    {% endif %}
  </section>
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">ğŸ¤</div>
      <div>
        <h3>Negotiation Assistant</h3>
        <p class="tile-subtitle">Evaluate offers and draft counters fast.</p>
      </div>
    </div>
    {% if user.plan and user.plan|lower == "premium" %}
      <a class="btn btn-secondary" href="/negotiation">Open</a>
    {% else %}
      <span class="badge">Premium</span>
      <a class="btn btn-secondary" href="/upgrade?reason=negotiation">Unlock with Premium</a>
    {% endif %}
  </section>
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">ğŸŒ</div>
      <div>
        <h3>Community Rate Index</h3>
        <p class="tile-subtitle">See what creators like you are charging.</p>
      </div>
    </div>
    {% if user.plan and user.plan|lower == "premium" %}
      <a class="btn btn-secondary" href="/rate-index">Open</a>
    {% else %}
      <span class="badge">Premium</span>
      <a class="btn btn-secondary" href="/upgrade?reason=rate-index">Unlock with Premium</a>
    {% endif %}
  </section>
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">ğŸ“ˆ</div>
      <div>
        <h3>Analytics</h3>
        <p class="tile-subtitle">Track revenue, close rates, and trends.</p>
      </div>
    </div>
    {% if user.plan and user.plan|lower in ["pro", "premium"] %}
      <a class="btn btn-secondary" href="/analytics">Open</a>
    {% else %}
      <span class="badge">Pro</span>
      <a class="btn btn-secondary" href="/upgrade?reason=analytics">Unlock with Pro</a>
    {% endif %}
  </section>
  <section class="card card-accent dashboard-tile">
    <div class="tile-header">
      <div class="tile-icon">âœ¨</div>
      <div>
        <h3>AI Insights</h3>
        <p class="tile-subtitle">Get tailored recommendations from your data.</p>
      </div>
    </div>
    <a class="btn btn-secondary" href="/insights">Open</a>
  </section>
</div>

<section class="card card-accent-secondary">
  <div class="tile-header">
    <div class="tile-icon">ğŸ’³</div>
    <div>
      <h3>Billing</h3>
      <p class="tile-subtitle">Manage your plan and subscription.</p>
    </div>
  </div>
  <p>Current plan: <strong>{{ user.plan|capitalize }}</strong></p>
  {% if user.plan and user.plan|lower in ["starter", "pro", "premium"] %}
    <a class="btn btn-secondary" href="/billing/portal">Manage billing</a>
  {% else %}
    <p class="muted">Upgrade any time to unlock more tools.</p>
    <div class="grid grid-3">
      <form action="/billing/checkout" method="post" class="card card-muted">
        <h4>Starter</h4>
        <p class="muted">$9 / month</p>
        <input type="hidden" name="plan" value="starter" />
        <button class="btn btn-secondary" type="submit">Upgrade to Starter</button>
      </form>
      <form action="/billing/checkout" method="post" class="card card-muted">
        <h4>Pro</h4>
        <p class="muted">$19 / month</p>
        <input type="hidden" name="plan" value="pro" />
        <button class="btn btn-secondary" type="submit">Upgrade to Pro</button>
      </form>
      <form action="/billing/checkout" method="post" class="card card-muted">
        <h4>Premium</h4>
        <p class="muted">$29 / month</p>
        <input type="hidden" name="plan" value="premium" />
        <button class="btn btn-secondary" type="submit">Upgrade to Premium</button>
      </form>
    </div>
  {% endif %}
</section>
{% endblock %}
